{% extends '/base.html.twig' %}

{% block title %}Techno{% endblock %}

{% block body %}



    <div class = "fixed w-full z-30 flex bg-white dark:bg-[#282B2A] p-2 items-center justify-center h-16 px-10">
        <div class = "logo ml-12 dark:text-white  transform ease-in-out duration-500 flex-none h-full flex items-center justify-center">
            <b>Carbon</b>
        </div>
        <!-- SPACER -->
        <div class = "grow h-full flex items-center justify-center"></div>
        <div class = "flex-none h-full text-center flex items-center justify-center">

            <div class = "flex space-x-3 items-center px-3">
                <div class = "flex-none flex justify-center">
                    <div class="w-8 h-8 flex ">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShta_GXR2xdnsxSzj_GTcJHcNykjVKrCBrZ9qouUl0usuJWG2Rpr_PbTDu3sA9auNUH64&usqp=CAU" alt="profile" class="shadow rounded-full object-cover" />
                    </div>
                </div>

                <div class = "hidden md:block text-sm md:text-md text-black dark:text-white">{{app.user.nom}}</div>
            </div>

        </div>
    </div>
    <aside class = "w-60 -translate-x-48 fixed transition transform ease-in-out duration-1000 z-50 flex h-screen bg-[#282B2A] ">
        <!-- open sidebar button -->
        <div class = "max-toolbar translate-x-24 scale-x-0 w-full -right-6 transition transform ease-in duration-300 flex items-center justify-between  dark:border-[#0F172A] bg-[#282B2A]  absolute top-2 rounded-full h-12">

            <div class="flex pl-4 items-center space-x-2 ">
                <div>

                </div >

            </div>
            <div  class = "flex items-center space-x-3 group bg-gradient-to-r dark:from-cyan-500 dark:to-blue-500 from-indigo-500   pl-10 pr-2 py-1 rounded-full text-white  ">

            </div>
        </div>
        <div onclick="openNav()" class = "-right-6 transition transform ease-in-out duration-500 flex border-4 border-white dark:border-[#0F172A] bg-[#282B2A] dark:hover:bg-blue-500  absolute top-2 p-3 rounded-full text-white hover:rotate-45">
            <img src="{{asset('/images/Logo.png')}}" fill="none" viewBox="0 0 24 24" strokeWidth={3} stroke="currentColor" class="w-4 h-4">
            <path strokeLinecap="round" strokeLinejoin="round" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z" />
            </img>
        </div>
        <!-- MAX SIDEBAR-->
        <div class= "max hidden text-white mt-20 flex-col space-y-2 w-full h-[calc(100vh)]">
            <div class =  "hover:ml-4 w-full text-white  dark:hover:text-blue-500 bg-[#282B2A] p-2 pl-8 rounded-full transform ease-in-out duration-300 flex flex-row items-center space-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" class="w-4 h-4">
                    <path strokeLinecap="round" strokeLinejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                </svg>
                <div>
                    <a href="/"> Home</a>
                </div>
            </div>
            <div class =  "hover:ml-4 w-full text-white dark:hover:text-blue-500 bg-[#282B2A] p-2 pl-8 rounded-full transform ease-in-out duration-300 flex flex-row items-center space-x-3">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5" />
                </svg>
                <div>
                                  {% if app.user.roles[0] == 'ROLE_ADMIN' %}

                   <a href="{{path('admin_profil')}}">  Mon profil </a>
                   {% endif %}
                                   {% if app.user.roles[0] == 'ROLE_OPERATIONNEL' %}
                   <a href="{{path('operationnel_profil')}}">  Mon profil </a>

{% endif %}
                </div>
            </div>
            <div class =  "hover:ml-4 w-full text-white dark:hover:text-blue-500 bg-[#282B2A] p-2 pl-8 rounded-full transform ease-in-out duration-300 flex flex-row items-center space-x-3">

                <div>
                    <a href="/logout" style="color:#E53F49">Se déconnecter</a>                </div>
            </div>
        </div>
        <!-- MINI SIDEBAR-->
        <div class= "mini mt-20 flex flex-col space-y-2 w-full h-[calc(100vh)]">
            <div class= "hover:ml-4 justify-end pr-5 text-white ark:hover:text-blue-500 w-full bg-[#282B2A] p-3 rounded-full transform ease-in-out duration-300 flex">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" class="w-4 h-4">
                    <path strokeLinecap="round" strokeLinejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                </svg>
            </div>
            <div class= "hover:ml-4 justify-end pr-5 text-white dark:hover:text-blue-500 w-full bg-[#282B2A] p-3 rounded-full transform ease-in-out duration-300 flex">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5" />
                </svg>
            </div>
            <div class= "hover:ml-4 justify-end pr-5 text-white dark:hover:text-blue-500 w-full bg-[#282B2A] p-3 rounded-full transform ease-in-out duration-300 flex">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
                </svg>
            </div>
        </div>

    </aside>
<div class = "content ml-12 transform ease-in-out duration-500 pt-20 px-2 md:px-5 pb-4 ">
    <h1 style="text-align: center;font-size: 2.3em;font-weight: bold">{{ techno.nom  }}</h1>
    <div style="display: flex;justify-content: flex-end">
 {% if app.user.roles[0] == 'ROLE_ADMIN' %}

        <a href="{{ path('app_admin_test_new_by_id_techno', {'id': techno.id}) }}">
        <button style="background-color: #5B98D2;padding: 10px;border-radius: 10px; color: white; display: flex;gap: 8px;" class="mb-5">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="white" d="M14 3v2H4v13.385L5.763 17H20v-7h2v8a1 1 0 0 1-1 1H6.455L2 22.5V4a1 1 0 0 1 1-1h11Zm5 0V0h2v3h3v2h-3v3h-2V5h-3V3h3Z"/></svg>
            Créer une session de test
        </button>
        </a>
        {% endif %}
 {% if app.user.roles[0] == 'ROLE_OPERATIONNEL' %}


        <a href="{{ path('app_operationnel_test_new_by_id_techno', {'id': techno.id}) }}">
        <button style="background-color: #5B98D2;padding: 10px;border-radius: 10px; color: white; display: flex;gap: 8px;" class="mb-5">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="white" d="M14 3v2H4v13.385L5.763 17H20v-7h2v8a1 1 0 0 1-1 1H6.455L2 22.5V4a1 1 0 0 1 1-1h11Zm5 0V0h2v3h3v2h-3v3h-2V5h-3V3h3Z"/></svg>
            Créer une session de test
        </button>
        </a>

        {% endif %}


    </div>


    <div class="mt-3">
        <div style="display: flex;justify-content: space-between">
            <h2 class="mb-6" style="font-size: 1.8em;font-weight: 500;">Description</h2>
            {{ include('admin/techno/_delete_form.html.twig') }}
        </div>
        <div class="mt-5 mb-5 p-7" style="box-shadow: 0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1)">
            <p>{{ techno.description }}</p>
        </div>
    </div>
    <div style="display: flex;gap:10px;">
        <a href="{{ path('app_techno_index') }}">
            <button style="background-color: #5B98D2;padding: 10px;border-radius: 10px; color: white; display: flex;gap: 8px;" class="mb-5">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill="white" fill-rule="evenodd" d="m2.87 7.75l1.97 1.97a.75.75 0 1 1-1.06 1.06L.53 7.53L0 7l.53-.53l3.25-3.25a.75.75 0 0 1 1.06 1.06L2.87 6.25h9.88a3.25 3.25 0 0 1 0 6.5h-2a.75.75 0 0 1 0-1.5h2a1.75 1.75 0 1 0 0-3.5H2.87Z" clip-rule="evenodd"/></svg>
                Back to list
            </button>
        </a>
        <a href="{{ path('app_techno_edit', {'id': techno.id}) }}">
        <button style="background-color: #5B98D2;padding: 10px;border-radius: 10px; color: white; display: flex;gap: 8px;" class="mb-5">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="white" d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
            Edit
        </button>
        </a>
    </div>

    {% if techno.tests|length > 0 %}
        <h2 class="mb-6" style="font-size: 1.8em;font-weight: 500;">Les Tests</h2>
        <div style="display: flex;justify-content: flex-start; flex-wrap: wrap;gap: 20px;">
        {% for test in techno.tests %}
            <div style="border-radius: 10px;border: 2px solid #5B98D2;width: 300px;box-shadow: 0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);" class="p-3">
                <h1 style="text-align: center;font-weight: 500;" class="p-5">{{ test.nom }}</h1>
                <p>Participant : {{ test.testResults|length }}</p>
                <p>Level :
                {% if test.difficulte == 1 %}
                    Starter
                {% elseif test.difficulte == 2 %}
                    Intermediate
                {% elseif test.difficulte == 3 %}
                    Expert
                {% endif %}
                </p>
                <p>Status :
                    {% if test.actif %}
                    <span
                            class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                        <span aria-hidden
                                              class="absolute inset-0 bg-green-200 opacity-50 rounded-full"></span>
                        <span class="relative">Actif</span></span>
                    {% else %}
                        <span
                                class="relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight">
                                        <span aria-hidden
                                              class="absolute inset-0 bg-red-200 opacity-50 rounded-full"></span>
									<span class="relative">Innactif</span>
									</span>
                    {% endif %}
                </p>
                                  {% if app.user.roles[0] == 'ROLE_ADMIN' %}

                <a href="{{ path("app_admin_test_show_techno",{ 'id':techno.id }) }}">
                    <button  style="background-color: #5B98D2;padding: 10px;border-radius: 10px; color: white; display: flex;gap: 8px;margin:8px auto" class="mb-5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="white" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                            Détails
                    </button>
                </a>
{% endif %}
 {% if app.user.roles[0] == 'ROLE_OPERATIONNEL' %}

                <a href="{{ path("app_operationnel_test_show_techno",{ 'id':techno.id }) }}">
                    <button  style="background-color: #5B98D2;padding: 10px;border-radius: 10px; color: white; display: flex;gap: 8px;margin:8px auto" class="mb-5">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path fill="white" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                            Détails
                    </button>
                </a>
{% endif %}

            </div>
        {% endfor %}
        </div>
    {% endif %}




</div>
{% endblock %}
